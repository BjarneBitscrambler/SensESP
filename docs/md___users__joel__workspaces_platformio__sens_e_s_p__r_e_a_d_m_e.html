<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SensESP: SensESP</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SensESP
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Universal Signal K sensor framework for ESP8266 and ESP32</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md___users__joel__workspaces_platformio__sens_e_s_p__r_e_a_d_m_e.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SensESP </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>SensESP is a Signal K sensor development library for ESP8266 and ESP32. It can be used as a high-level toolkit for creating ESP sensor devices that interface with Signal K servers. At the moment it is very much a work in progress.</p>
<p>SensESP is heavily inspired by <a href="https://github.com/mxtommy/SigkSens">SigkSens</a> and prior work done by <a href="https://github.com/mxtommy">@mxtommy</a>.</p>
<h2>Getting Started</h2>
<p>SensESP is a library and will be installed automatically as a dependency when defined as such in the project's <code>platformio.ini</code> file.</p>
<p>You need to have PlatformIO installed. First, download and install <a href="https://code.visualstudio.com/">Visual Studio Code</a>. Then, select "Extensions" from the left toolbar (see image XX). Search for "platformio", select the first result, and press "Install".</p>
<p>Once you have PlatformIO installed, its home screen should open automatically when you start VSCode. On the PIO Home, select "New Project". Enter a name and then select "WeMos
D1 mini" in the board dropdown. The Arduino framework should become automatically selected. Complete the new project dialog and open the project you created.</p>
<p>Once you have your new project open, open the <code>platformio.ini</code> file. Add the SensESP dependency:</p>
<div class="fragment"><div class="line">lib_deps =</div><div class="line">    SensESP</div></div><!-- fragment --><p>The above definition will work only once the library registration is completed. Until then, use the following:</p>
<div class="fragment"><div class="line">lib_deps =</div><div class="line">    https://github.com/mairas/SensESP.git</div></div><!-- fragment --><p>Then, open <code>src/main.cpp</code>. The default template is for Arduino IDE and the SensESP main file will look a bit different. Replace the <code>main.cpp</code> contents with one of the SensESP examples in the <code>examples</code> subdirectory. Check that the settings match your hardware and select "Build" from the PlatformIO submenu (the little alien face) from the left toolbar. If the build succeeds, you can plug in your Wemos board and press "Upload and Monitor".</p>
<p>Assuming the project uploading was successful, you will have a sensor running the sample code. To configure it, connect your computer or phone wifi to the "Unconfigured Sensor" network. A captive portal should pop up. Enter your wifi credentials to allow the device to access the network. Also enter a suitable name, for example <code>sensesp</code> for the device.</p>
<p>Once on the network, your new SensESP device should automatically find your Signal K server, assuming it has mDNS enabled. If your server has security enabled, you should get an access request for the device. Approve it, preferably with a long or infinite duration, and you should start getting data on the instrument panel.</p>
<h2>Low-level wiring</h2>
<p>TODO!</p>
<h2>Runtime setup</h2>
<p>In the examples below, <code>sensesp</code> is used as the device name.</p>
<p>SensESP implements a RESTful configuration API. A list of possible configuration keys can be retrieved from: </p><pre class="fragment">http://sensesp.local/config
</pre><p>An individual key configuration can be retrieved under the config path: </p><pre class="fragment">http://sensesp.local/config/system/networking
</pre><p>Configuration can be updated with HTTP PUT requests: </p><pre class="fragment">curl -X PUT \
http://sensesp.local/config/system/networking \
-H 'Content-Type: application/json' \
-d '{
  "hostname": "myesp"
}'
</pre><h2>Feature wishlist</h2>
<ul>
<li>[x] Persistent configuration</li>
<li>[x] RESTful HTTP control interface</li>
<li>[x] Improved device configuration system</li>
<li>[x] Authentication token support</li>
<li>[x] Make the project a library</li>
<li>[ ] Web configuration UI</li>
<li>[ ] Control device support. For now, all devices are read-only, and control devices such as leds, relays, or PWM output are not supported.</li>
</ul>
<h2>SensESP Class Diagram </h2>
<img src="sens_esp_uml.png" alt="alt text" title="UML for SensESP" class="inline"/>
 </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
